<div class=" w-[20rem] sm:w-[18rem] flex flex-col gap-2 border rounded-lg overflow-hidden mx-auto">
  <div class="image-container flex items-center overflow-x-hidden relative no-scrollbar">
    {%if listing.medias.all.count > 1 %}
    <button id="left-btn" class="scroll-btn rounded-full left-btn absolute left-2 transform -translate-y-1/5 text-4xl bg-white/50 p-2 cursor-pointer">&#8592;</button>
    {%endif%}
    <div id="image-scroll" class="image-scroll no-scrollbar flex w-full overflow-x-auto scroll-snap-type-x scroll-smooth ">
      {% for media in listing.medias.all %}
        <img class="h-[12rem] w-full  object-cover flex-none scroll-snap-align-start" src="{{ media.file_path }}" alt="Listing Media">
      {% endfor %}
    </div>
    {%if listing.medias.all.count > 1 %}
    <button id="right-btn" class="scroll-btn rounded-full right-btn absolute right-2 transform -translate-y-1/5 text-4xl bg-white/50 p-2 cursor-pointer">&#8594;</button>
    {%endif%}
  </div>
  <div class="flex flex-col p-2">
    <div class="flex justify-between items-center">
      <a class="text-xl font-semibold" href="{{ listing.id }}"> {{ listing.title }} </a>
      <span class=" text-white text-xs font-semibold px-2.5 py-0.5 rounded  {% if listing.status %} bg-green-400 text-cyan-600  {% elif not listings.status %} bg-red-400 text-red-600 {% endif %}">{%if listing.status %} available {%else%} unavailable {%endif%}</span>
    </div>
    <div class=" flex items-center gap-2">
      <i class="fas fa-map-marker-alt    "></i>
      <span class="text-sm">{{ listing.area }}, {{ listing.sub_city }}, {{ listing.city }}</span>
    </div>
    <div class="flex">
      <span class="">🏛 {{ listing.rooms }} rooms</span>
      <span class="">🛏 {{ listing.bedrooms }} bedrooms</span>
      <span class="">🛁 {{ listing.bathrooms }} bathrooms</span>
    </div>
    <div class="flex items-end justify-between">
      <span class="text-2xl font-bold text-gray-900 ">${{ listing.price }}<span class="text-sm font-thin">/month</span></span>
      <a href="#" class="text-white bg-cyan-700 hover:bg-cyan-800 focus:ring-4 focus:outline-none focus:ring-cyan-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-cyan-600 dark:hover:bg-cyan-700 dark:focus:ring-cyan-800 ">Rent</a>
    </div>
  </div>
</div>

<script>
  const leftButtons = document.querySelectorAll('.left-btn');
  const rightButtons = document.querySelectorAll('.right-btn');
  const imageScrollContainers = document.querySelectorAll('.image-scroll');
  
  leftButtons.forEach((button, index) => {
    button.addEventListener('click', () => {
      imageScrollContainers[index].scrollBy({
        left : -286, 
        behavior: 'smooth'
      });
    });
  });
  
  rightButtons.forEach((button, index) => {
    button.addEventListener('click', () => {
      imageScrollContainers[index].scrollBy({
        left : 286, 
        behavior: 'smooth'
      });
    });
  });
</script>